{% extends "base.html" %}
{% load bootstrap3 %}

{% block title %}{{ article.title }} | {{ block.super }}{% endblock title %}

{% block content %}
  <div class="blog-heading">
    <h2 class="article-title">{{ article.title }}</h2>
    <p>
      <span class="glyphicon glyphicon-calendar" aria-hidden="true"></span>
      {{ article.pub_date }}
      {% if article.tags.all %}
        <span class="glyphicon glyphicon-tag" aria-hidden="true"></span>
        {% for tag in article.tags.all %}
          <a href="{{ tag.get_absolute_url }}">
            {{ tag.name }}</a>{% if not forloop.last %}, {% endif %}
        {% endfor %}
      {% endif %}
      {% if article.comment_set.all %}
        <span class="glyphicon glyphicon-comment" aria-hidden="true"></span>
        <a href="{{ article.get_absolute_url }}#comments">
          {{ article.comment_set.all|length }} Comments
        </a>
      {% endif %}
    </p>
  </div>
  <hr/>
  <div class="blog-content">
    {{ article.text|safe }}
  </div>
  <div id="comments" class="panel panel-default">
    <div class="panel-heading">
      <h2 class="panel-title">Comments</h2>
    </div>
    <div class="panel-body">
      {% for comment in article.comment_set.all %}
        <h4 id="comment-{{ comment.pk }}">
          {{ comment.name }} ({{ comment.pub_date }})
        </h4>
        <p>{{ comment.text }}</p>
        <hr/>
      {% endfor %}
      <h4>Add a comment</h4>
      <form id="commentform" action="{{ article.get_absolute_url }}#commentform" method="post" class="form">
        {% csrf_token %}
        {% bootstrap_form form %}
        {% buttons %}
          <button type="submit" class="btn btn-primary">Submit</button>
        {% endbuttons %}
      </form>
    </div>
  </div>
{% endblock %}

